#pragma once

#include <map>
#include <vector>
#include <string>

#include <BLEDevice.h>
#include <WheelValue.h>

#define WHEEL_SERVICE_UUID "e659f300-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CONFIG_UUID "00002902-0000-1000-8000-00805f9b34fb"

#define WHEEL_CHARACTERISTIC_SERIAL_NUMBER_UUID "e659F301-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_RIDING_MODE_UUID "e659f302-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_BATTERY_REMAINING_UUID "e659f303-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_BATTERY_LOW5_UUID "e659f304-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_BATTERY_LOW20_UUID "e659f305-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_BATTERY_SERIAL_UUID "e659f306-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_TILT_ANGLE_PITCH_UUID "e659f307-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_TILT_ANGLE_ROLL_UUID "e659f308-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_TILT_ANGLE_YAW_UUID "e659f309-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_TEMPERATURE_UUID "e659f310-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_STATUS_ERROR_UUID "e659f30f-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_BATTERY_CELLS_UUID "e659f31b-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_BATTERY_TEMP_UUID "e659f315-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_BATTERY_VOLTAGE_UUID "e659f316-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_CURRENT_AMPS_UUID "e659f312-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_CUSTOM_NAME_UUID "e659f3fd-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_FIRMWARE_REVISION_UUID "e659f311-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_HARDWARE_REVISION_UUID "e659f318-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_LAST_ERROR_CODE_UUID "e659f31c-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_LIFETIME_AMP_HOURS_UUID "e659f31a-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_LIFETIME_ODOMETER_UUID "e659f319-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_LIGHTING_MODE_UUID "e659f30c-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_LIGHTS_BACK_UUID "e659f30e-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_LIGHTS_FRONT_UUID "e659f30d-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_ODOMETER_UUID "e659f30a-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_SAFETY_HEADROOM_UUID "e659f317-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_SPEED_RPM_UUID "e659f30b-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_TRIP_REGEN_AMP_HOURS_UUID "e659f314-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_TRIP_TOTAL_AMP_HOURS_UUID "e659f313-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_UART_SERIAL_READ_UUID "e659f3fe-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_UART_SERIAL_WRITE_UUID "e659f3ff-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_UNKNOWN1_UUID "e659f31d-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_UNKNOWN2_UUID "e659f31e-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_UNKNOWN3_UUID "e659f31f-ea98-11e3-ac10-0800200c9a66"
#define WHEEL_CHARACTERISTIC_UNKNOWN4_UUID "e659f320-ea98-11e3-ac10-0800200c9a66"

class WheelCharacteristic
{
    public:

        static BLERemoteService* getRemoteService(BLEClient* client);

        static BLERemoteCharacteristic* getRemoteCharacteristic(BLEClient* client, std::string uuid);

        static WheelValue read(BLEClient* client, std::string uuid);

        static bool write(BLEClient* client, std::string uuid, uint8_t* bytes, size_t length);

        static bool registerListener(BLEClient* client, std::string uuid, notify_callback notifyCallback);

        static bool removeListener(BLEClient* client, std::string uuid);
};